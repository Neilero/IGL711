stages:
 - build


variables:
 IMAGE_NAME_serveur: "venzinjonas/serveur"
 IMAGE_NAME_BD: "venzinjonas/bdd"
 IMAGE_NAME_worker: "venzinjonas/worker"
 

build:
 stage: build
 image: docker:19.03
 
 services:
  - name: docker:19.03-dind
  
 script:
  - docker login -u venzinjonas -p $HubMDP
  - cd db
  - docker build -t $IMAGE_NAME_serveur .
  - docker push $IMAGE_NAME_serveur
  - cd ..
  - cd orchestrus
  - docker build -t $IMAGE_NAME_BD .
  - docker push $IMAGE_NAME_BD
  - cd ..
  - cd workers
  - docker build -t $IMAGE_NAME_worker .
  - docker push $IMAGE_NAME_worker
  

  